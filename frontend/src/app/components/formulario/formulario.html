<div class="invoice-page">
  <header class="invoice-hero">
    <p class="hero-tag">SISTEMA PROFESIONAL</p>
    <h1>Registro de Facturas</h1>
    <p>Ingrese los datos de su factura deducible para el cálculo tributario.</p>
  </header>

  <section class="form-shell">
    <div *ngIf="mostrarMensaje && mensajeError" class="alert alert-danger mb-4">
      <i class="bi bi-exclamation-circle-fill me-2"></i> {{ mensajeError }}
    </div>

    <form (ngSubmit)="enviarDatos()" #registroForm="ngForm" class="row g-4">
      <div class="col-12 section-title">
        <h2>Detalles del Gasto</h2>
      </div>

      <div class="col-12">
        <label class="form-label">Número de RUC</label>
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-person-badge"></i></span>
          <input type="text" class="form-control" name="ruc" [(ngModel)]="ruc" 
                 (input)="onInputChange()" placeholder="Ej: 1712345678001" maxlength="13">
        </div>
      </div>

      <div class="col-md-6">
        <label class="form-label">Valor (USD)</label>
        <div class="input-group">
          <span class="input-group-text">$</span>
          <input type="number" class="form-control" name="valor" [(ngModel)]="valor" 
                 placeholder="0.00" step="0.01" (input)="onInputChange()">
        </div>
      </div>

      <div class="col-md-6">
        <label class="form-label">Tipo de Gasto</label>
        <select class="form-select" name="tipoGasto" [(ngModel)]="tipoGasto" (change)="onInputChange()">
          <option value="">Seleccione...</option>
          <option *ngFor="let tipo of tiposGasto" [value]="tipo.valor">{{ tipo.etiqueta }}</option>
        </select>
      </div>

      <div class="col-12 mt-4">
        <div class="summary-band">
          <div>
            <span>RUC</span>
            <strong>{{ ruc || '---' }}</strong>
          </div>
          <div>
            <span>Monto</span>
            <strong>${{ valor || '0.00' }}</strong>
          </div>
          <div>
            <span>Categoría</span>
            <strong>{{ tipoGasto || '---' }}</strong>
          </div>
        </div>
      </div>

      <div class="col-12 mt-4">
        <button type="submit" class="btn btn-register w-100">
          <i class="bi bi-plus-circle me-2"></i> Agregar Gasto
        </button>
      </div>
    </form>
  </section>

  <footer class="text-center mt-5">
    <p style="color: var(--muted); font-size: 0.85rem;">
      <i class="bi bi-shield-check"></i> Cumplimos con normativas SRI &copy; 2024
    </p>
  </footer>
</div>